{
  "hash": "ee449a0e17a6ee0d5b2d980a5e439ca0",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"African Countries Facing the Greatest Challenges in Affording Healthy Food\"\nauthor: \"Christmore Setebe | ichidata solutions\"\ndate: \"2025-07-7\"\nimage: \"Diet.jpg\"\npage-layout: full\nformat: html\n---\n\n\n\n<!-- ✅ Navigation Buttons -->\n\n::: {.flex .gap-3 .pb-4}\n[📰 News](#news){.btn .btn-outline-secondary} [💻 Code and Visualization](#Code%20and%20Visualization){.btn .btn-outline-secondary} [📈 Data Storytelling](#Data%20Storytelling){.btn .btn-outline-secondary}\n:::\n\n<!-- ✅ Tabbed Sections Start -->\n\n## Explore the Story by Category {.tabset}\n\n### <span id=\"news\">📰 News</span>\n\nAcross many low-income nations, over 60% of the population cannot afford a healthy diet. This growing diet decline signals a nutritional emergency where families are forced to choose between essential nutrients and daily survival. As malnutrition rises, so does the urgency to act, ensuring access to nourishing food for all.\n\n------------------------------------------------------------------------\n\n### <span id=\"Code and Visualization\">💻 Code and Visualization</span>\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# Load required libraries\nlibrary(ggplot2)\nlibrary(dplyr)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'dplyr'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(countrycode)\nlibrary(ggimage)\nlibrary(grid)\n\n# Dataset\ndiet_data <- data.frame(\n  Location = c(\n    \"South Africa\", \"Belize\", \"Ghana\", \"Eswatini\", \"Angola\", \"Tanzania\",\n    \"Lesotho\", \"Nigeria\", \"Congo\", \"Kenya\", \"Haiti\", \"Sierra Leone\",\n    \"Burkina Faso\", \"Guinea-Bissau\", \"Liberia\", \"Uganda\", \"Rwanda\",\n    \"Zambia\", \"Niger\", \"Central African Republic\", \"Mozambique\",\n    \"Burundi\", \"Malawi\", \"Democratic Republic of Congo\", \"Madagascar\"\n  ),\n  Income_Classification = c(\n    \"Upper-middle-income countries\", \"Upper-middle-income countries\",\n    \"Lower-middle-income countries\", \"Lower-middle-income countries\",\n    \"Lower-middle-income countries\", \"Lower-middle-income countries\",\n    \"Lower-middle-income countries\", \"Lower-middle-income countries\",\n    \"Lower-middle-income countries\", \"Lower-middle-income countries\",\n    \"Lower-middle-income countries\", \"Low-income countries\",\n    \"Low-income countries\", \"Low-income countries\", \"Low-income countries\",\n    \"Low-income countries\", \"Low-income countries\", \"Low-income countries\",\n    \"Low-income countries\", \"Low-income countries\", \"Low-income countries\",\n    \"Low-income countries\", \"Low-income countries\", \"Low-income countries\",\n    \"Low-income countries\"\n  ),\n  Percentage = c(\n    61.2, 61.8, 63.0, 65.0, 72.2, 75.5, 76.3, 78.7, 79.1, 79.2, 83.6,\n    62.5, 63.1, 64.0, 64.1, 72.5, 75.7, 81.7, 86.3, 86.7, 89.3, 89.6,\n    89.6, 91.4, 93.6\n  )\n)\n\n# Add ISO2 codes\ndiet_data$ISO2 <- countrycode(diet_data$Location, origin = \"country.name\", destination = \"iso2c\")\ndiet_data$ISO2[diet_data$Location == \"Congo\"] <- \"cg\"\ndiet_data$ISO2[diet_data$Location == \"Democratic Republic of Congo\"] <- \"cd\"\ndiet_data$ISO2[diet_data$Location == \"Eswatini\"] <- \"sz\"\n\n# Add flag URLs\ndiet_data <- diet_data %>%\n  mutate(flag_url = paste0(\"https://flagcdn.com/w40/\", tolower(ISO2), \".png\"))\n\n# Sort and order\ndiet_data <- diet_data %>%\n  arrange(Percentage) %>%\n  mutate(Location = factor(Location, levels = Location))\n\n# Axis setup\nx_ticks <- c(0, 25, 50, 75, 100)\nline_y <- 0.2\ntick_height <- 0.4\n\n# Madagascar position\nmadagascar_y <- which(diet_data$Location == \"Madagascar\")\nmadagascar_x <- diet_data$Percentage[diet_data$Location == \"Madagascar\"]\n\n# Annotation text\nannotation_text <- paste(\n  \"Madagascar:\",\n  \"9 out of 10\",\n  \"individuals cannot\",\n  \"afford to eat healthily\",\n  sep = \"\\n\"\n)\n\n# Plot\nggplot(diet_data, aes(x = Percentage, y = Location, fill = Income_Classification)) +\n  \n  # Flags left of bars\n  geom_image(aes(x = -3, image = flag_url), size = 0.04, asp = 1) +\n  \n  # Bars\n  geom_col(width = 0.899) +\n  \n  # Labels on bars\n  geom_text(aes(label = paste0(Percentage, \"%\")), hjust = -0.1, size = 3.5, color = \"black\") +\n  \n  # Dotted line\n  geom_hline(yintercept = line_y, linetype = \"dashed\", color = \"gray60\", linewidth = 0.6) +\n  \n  # Tick marks\n  annotate(\"segment\",\n           x = x_ticks, xend = x_ticks,\n           y = line_y - tick_height / 2, yend = line_y + tick_height / 2,\n           color = \"black\", linewidth = 1.2) +\n  \n  # Tick labels\n  annotate(\"text\", x = x_ticks, y = line_y - tick_height - 0.1,\n           label = paste0(x_ticks, \"%\"), size = 3.8, color = \"black\", fontface = \"bold\") +\n  \n  # ▶️ SHORTER ARROW from Madagascar to annotation\n  annotate(\"segment\",\n           x = madagascar_x + 6.0,\n           xend = madagascar_x + 19,\n           y = madagascar_y,\n           yend = madagascar_y - 5,\n           colour = \"firebrick\",\n           size = 1,\n           arrow = arrow(\n             angle = 30,\n             length = unit(0.3, \"cm\"),\n             ends = \"last\",\n             type = \"closed\"\n           )\n  ) +\n  \n  # ✅ Fixed: Annotation box on right using `annotate()` instead of `geom_label()`\n  annotate(\"label\",\n           x = 110, y = madagascar_y - 7,\n           label = annotation_text,\n           size = 5,\n           color = \"black\",\n           fill = \"#fef9e7\",\n           label.size = 0.6,\n           hjust = 0.5,\n           vjust = 0.5,\n           lineheight = 1.2\n  ) +\n  \n  # Labels and legend\n  labs(\n    title = \"Countries Where Healthy Diets Are Least Affordable in Africa\",\n    subtitle = \"Distribution of unaffordable healthy diets across African countries, highlighting the most impacted populations\",\n    caption = \"Data source: FAO and World Bank (2024)\\nVisualization: ichi data solutions\",\n    x = \"Percentage (%)\",\n    y = NULL,\n    fill = \"World Bank Income Classification\"\n  ) +\n  \n  # Fill colors\n  scale_fill_manual(values = c(\n    \"Low-income countries\" = \"gray71\",\n    \"Lower-middle-income countries\" = \"#20c997\",\n    \"Upper-middle-income countries\" = \"#f1c40f\"\n  )) +\n  \n  # Axis limits\n  coord_cartesian(xlim = c(-5, 115), clip = \"off\") +\n  \n  # Theme\n  theme_void() +\n  theme(\n    axis.text.y = element_text(size = 10, hjust = 0),\n    axis.ticks.y = element_blank(),\n    plot.title = element_text(face = \"bold\", size = 14, hjust = 0.5),\n    plot.subtitle = element_text(size = 11, hjust = 0.5),\n    plot.caption = element_text(size = 9, hjust = 0, margin = margin(t = 10)),\n    legend.position = \"bottom\",\n    plot.margin = margin(10, 30, 60, 20),\n    panel.grid = element_blank()\n  )\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.\nℹ Please use `linewidth` instead.\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](Diet_files/figure-html/unnamed-chunk-1-1.png){fig-align='center' width=3600}\n:::\n:::\n\n\n\n### <span id=\"Data Storytelling\">📈 Data Storytelling</span>\n\n#### 🥗 **Diet Decline Across Africa: A Growing Crisis**\n\nAcross Africa, millions struggle to afford basic nutritious meals. In low-income countries, like Madagascar and the Democratic Republic of Congo, over 90% of people cannot afford a healthy diet. This crisis also touches lower-middle-income countries such as Nigeria and Kenya, where around 78-79% face the same challenge. Even some upper-middle-income countries , like South Africa, see over 60% unable to meet basic nutrition needs.\n\nThis widespread diet decline threatens child development, economic productivity, and community well-being. Urgent investment in food systems and nutrition programs is essential to break the cycle and build a healthier future for all.",
    "supporting": [
      "Diet_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}